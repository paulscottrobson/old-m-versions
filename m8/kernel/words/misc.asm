; ********************************************************************************************************
; ********************************************************************************************************
;
;		Name : 		misc.asm
;		Author : 	Paul Robson (paul@robsons.org.uk)
;		Purpose : 	Miscellaneous words, mostly links to code elsewhere.
;		Date : 		15th September 2018
;
; ********************************************************************************************************
; ********************************************************************************************************

; ========================================================================================================
;											Stop program
; ========================================================================================================

; @word halt
		jp 		HaltCode

; ========================================================================================================
;								Reset Z80 Stack, but return to caller
; ========================================================================================================

; @word sp.reset
		pop 	ix  									; where we return to
		ld 		sp,stackTop 							; reset SP
		jp 		(ix)
		
; ========================================================================================================
;												Clear Screen
; ========================================================================================================

; @word clr.screen
		jp 		IOClearScreen

; ========================================================================================================
;											  Set cursor position
; ========================================================================================================

; @word cursor!
		jp 		IOSetCursor

; ========================================================================================================
;												 Write to screen
; ========================================================================================================

; @word screen!
		ld 		a,e
		jp 		IOWriteCharacter				

; ========================================================================================================
;												 Scan keyboard
; ========================================================================================================

; @word key@
		call 	IOScanKeyboard
		ld 		l,a
		ld 		h,0
		ret
		
; ========================================================================================================
;												Buffer information
; ========================================================================================================

; @word buffer
		ex 		de,hl
		ld 		hl,buffer
		ret

; @word buffer.size
		ex 		de,hl
		ld 		hl,bufferSize
		ret

; ========================================================================================================
;												System Information
; ========================================================================================================

; @word sys.info
		ex 		de,hl
		ld 		hl,SystemVariables
		ret
